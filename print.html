<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Cloud Security Checklist</title>
                <meta name="robots" content="noindex" />
                

        <!-- Custom HTML head -->
        

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

                <link rel="icon" href="favicon.svg">
                        <link rel="shortcut icon" href="favicon.png">
                <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
                <link rel="stylesheet" href="css/print.css" media="print">
        
        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
                <link rel="stylesheet" href="fonts/fonts.css">
        
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        
            </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="index.html"><strong aria-hidden="true">1.</strong> Introduction</a></li><li class="chapter-item expanded "><a href="about/index.html"><strong aria-hidden="true">2.</strong> About null</a></li><li class="chapter-item expanded "><a href="about/study-group.html"><strong aria-hidden="true">3.</strong> Study Group</a></li><li class="chapter-item expanded "><a href="aws-security/index.html"><strong aria-hidden="true">4.</strong> AWS Security Checklist</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="aws-security/ec2.html"><strong aria-hidden="true">4.1.</strong> AWS EC2</a></li><li class="chapter-item expanded "><a href="aws-security/rds.html"><strong aria-hidden="true">4.2.</strong> AWS RDS</a></li><li class="chapter-item expanded "><a href="aws-security/iam.html"><strong aria-hidden="true">4.3.</strong> AWS IAM</a></li><li class="chapter-item expanded "><a href="aws-security/lambda.html"><strong aria-hidden="true">4.4.</strong> AWS Lambda</a></li><li class="chapter-item expanded "><a href="aws-security/eks.html"><strong aria-hidden="true">4.5.</strong> AWS EKS</a></li></ol></li><li class="chapter-item expanded "><a href="CONTRIBUTORS.html"><strong aria-hidden="true">5.</strong> Contributors</a></li><li class="chapter-item expanded "><a href="CONTRIBUTING.html"><strong aria-hidden="true">6.</strong> How to Contribute?</a></li></ol>            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                                                <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                                            </div>

                    <h1 class="menu-title">Cloud Security Checklist</h1>

                    <div class="right-buttons">
                                                <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                                                                        
                    </div>
                </div>

                                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="introduction"><a class="header" href="#introduction">Introduction</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="about-null"><a class="header" href="#about-null">About null</a></h1>
<p><a href="https://null.community/">null</a> is one of the most active, open security communities. Registered as a non-profit society in 2010. One of the main objectives for null is spreading information security awareness. In a calendar year, null chapters host about 100+ events across security domains and impact about 8000-10000 security professionals, enthusiasts, and beginners with their initiatives. null is open, professional, inclusive, responsible, and most importantly completely volunteer-driven.</p>
<p>Study Groups are an initiative by null Community to help new commers in the field of cyber security get exposure and learn along with other like minded people guided by industry experts.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="study-group---cloud-security"><a class="header" href="#study-group---cloud-security">Study Group - Cloud Security</a></h1>
<p>null Cloud Security Study Group ran through the duration of <strong>Feb, 2021 - Aug, 2021</strong>.</p>
<h2 id="mentors"><a class="header" href="#mentors">Mentors</a></h2>
<ul>
<li><a href="https://www.linkedin.com/in/jayeshsch/">Jayesh Chauhan</a></li>
<li><a href="https://www.linkedin.com/in/madhuakula/">Madhu Akula</a></li>
</ul>
<h2 id="structure"><a class="header" href="#structure">Structure</a></h2>
<p>Here are the things at a very high level of the structure or things we wanted to do in the null Cloud Security study group.</p>
<ul>
<li>Pre-requirements for the study group with learning the basic fundamentals
<ul>
<li>Basic Sysadmin, Networking, Programming, etc.</li>
</ul>
</li>
<li>AWS Fundamentals (Learning more about services and understanding them)
<ul>
<li>The course has been provided</li>
</ul>
</li>
<li>AWS Security Fundamentals Certification (Helps to understand basic security concepts in AWS)
<ul>
<li>The course has been provided</li>
<li>Everyone needs to be AWS Security Fundamentals certified</li>
</ul>
</li>
<li>Important Services Security Deep DiveSetup service(using provided resources) and perform offensive side basic security tests. Then perform defensive security controls and test attacks payloads used earlier.
<ul>
<li>Compute
<ul>
<li>EC2</li>
<li>Lambda</li>
<li>EKS</li>
<li>Others.</li>
</ul>
</li>
<li>Storage
<ul>
<li>S3</li>
<li>RDS</li>
<li>Elastic Cache</li>
<li>Others.</li>
</ul>
</li>
<li>IAM</li>
<li>Logging &amp; Monitoring</li>
<li>Many others...</li>
</ul>
</li>
<li>Learning more about security testing in AWS and how to perform(Ex: CloudGoat)
<ul>
<li>This will be focused on how to perform penetration testing</li>
<li>We will leverage TTPs and perform attackers perspective</li>
<li>Understanding attack surface, attack matrix, etc.</li>
<li>Deep dive into offensive security</li>
</ul>
</li>
<li>Learning more about security defense in AWS and how to perform(AWS well-architected framework, introduction to terraform, cloud formation like tech)
<ul>
<li>This will be focused on how to perform a defense in AWS</li>
<li>We will leverage TTPs and perform defenders perspective</li>
<li>An understanding layered approach, defense in depth, security controls, etc.</li>
<li>Deep dive into defensive security</li>
</ul>
</li>
<li>Architecture &amp; Automation parts
<ul>
<li>We will be reviewing how real-world architectures looks like(Make students build their own well-architected setup. Ex: setup storage services on your AWS account and review them on a call. Do the same for computing services)</li>
<li>We will leverage the power of automation to build things
<ul>
<li>Terraform, Cloudformation, Lambda, etc.</li>
</ul>
</li>
<li>How to leverage Cloud for both offensive &amp; defensive using the power of automation(CTFs if it is possible)</li>
</ul>
</li>
<li>Trying to cover other cloud providers in a similar manner as above (Depends on time and resources GCP, Azure, DO, OpenStack, etc.)Theoretically(if possible, do practical) take up X services of Azure or GCP or Do and explain how they align with Y services of AWS.</li>
<li>Giving more references and resources</li>
</ul>
<blockquote>
<p>Note: This is what planned in the initial stage. Due to the constraints, we haven't completed everything as part of this study group.</p>
</blockquote>
<p>We also did ample amount of hands-on using the open source learning material - </p>
<ul>
<li><a href="http://flaws.cloud/">flaws.cloud</a></li>
<li><a href="http://flaws2.cloud/">flaws2.cloud</a></li>
<li><a href="https://github.com/RhinoSecurityLabs/cloudgoat">Cloud Goat</a></li>
</ul>
<p>Along with trying out different tools -</p>
<ul>
<li>CloudTracker</li>
<li>PMapper</li>
<li>PolicySentry</li>
<li>AirIAM</li>
<li>enumerate-iam</li>
<li>serverless-puresec-cli</li>
<li>Parliament</li>
<li>iamlive</li>
</ul>
<blockquote>
<p>We started with AWS Cloud in this iteration of the Cloud Security Study Group, and plan to move forward with different cloud service providers in next iterations.</p>
</blockquote>
<div style="break-before: page; page-break-before: always;"></div><h1 id="aws-security-checklist"><a class="header" href="#aws-security-checklist">AWS Security Checklist</a></h1>
<p>In AWS Cloud the security is composed of five areas:</p>
<ol>
<li>Identity and access management</li>
<li>Detective controls</li>
<li>Infrastructure protection</li>
<li>Data protection</li>
<li>Incident response</li>
</ol>
<h2 id="services-checklists"><a class="header" href="#services-checklists">Services Checklists</a></h2>
<ul>
<li><a href="aws-security/ec2.html">AWS EC2</a></li>
<li><a href="aws-security/rds.html">AWS RDS</a></li>
<li><a href="aws-security/iam.html">AWS IAM</a></li>
<li><a href="aws-security/lambda.html">AWS Lambda</a></li>
<li><a href="aws-security/eks.html">AWS EKS</a></li>
</ul>
<h2 id="references"><a class="header" href="#references">References</a></h2>
<ul>
<li><a href="https://aws.amazon.com/architecture/well-architected/">AWS Well Architected Framework</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="aws-ec2"><a class="header" href="#aws-ec2">AWS EC2</a></h1>
<h2 id="preventive-controls"><a class="header" href="#preventive-controls">Preventive Controls</a></h2>
<ul>
<li><input disabled="" type="checkbox"/>
EBS Volume Encryption for all EC2</li>
<li><input disabled="" type="checkbox"/>
Encryption at Rest</li>
<li><input disabled="" type="checkbox"/>
EC2 Instance Connect instead of plain SSH</li>
<li><input disabled="" type="checkbox"/>
Implement AWS WAF (Web Application Firewall) through Amazon CloudFront</li>
<li><input disabled="" type="checkbox"/>
Setup NACL with allowing only the necessary ports</li>
<li><input disabled="" type="checkbox"/>
Allow Users to Launch Approved Images and Use Existing Security Groups Only</li>
<li><input disabled="" type="checkbox"/>
Turn on AWS Detective</li>
<li><input disabled="" type="checkbox"/>
Use CA signed certificates with SSH using AWS Secrets Manager</li>
<li><input disabled="" type="checkbox"/>
Encryption in transit (SSL)</li>
<li><input disabled="" type="checkbox"/>
AWS Systems Manager Patch Manager</li>
<li><input disabled="" type="checkbox"/>
Automation for Instance Patching (Use CloudFormation)</li>
<li><input disabled="" type="checkbox"/>
AMI Security Monitoring Package</li>
<li><input disabled="" type="checkbox"/>
Creating a security group for EC2</li>
<li><input disabled="" type="checkbox"/>
Require the Use of IMDSv2 When Launching EC2 Instances</li>
<li><input disabled="" type="checkbox"/>
Require MFA to Stop an Amazon EC2 Instance</li>
</ul>
<h2 id="detective-controls"><a class="header" href="#detective-controls">Detective Controls</a></h2>
<ul>
<li><input disabled="" type="checkbox"/>
Enable Cloudtrail</li>
<li><input disabled="" type="checkbox"/>
Enable AWS Config</li>
<li><input disabled="" type="checkbox"/>
AWS Inspector</li>
</ul>
<h2 id="logging-and-monitoring"><a class="header" href="#logging-and-monitoring">Logging and Monitoring</a></h2>
<ul>
<li><input disabled="" type="checkbox"/>
Amazon CloudWatch</li>
<li><input disabled="" type="checkbox"/>
Enable Cloudtrail</li>
<li><input disabled="" type="checkbox"/>
Flow Logs</li>
<li><input disabled="" type="checkbox"/>
VPC Traffic Monitoring</li>
</ul>
<h2 id="identity-and-access-management"><a class="header" href="#identity-and-access-management">Identity and Access Management</a></h2>
<ul>
<li><input disabled="" type="checkbox"/>
Grant least privilege policy</li>
<li><input disabled="" type="checkbox"/>
Define IAM policy to launch EC2 instances only in a specific subnet and VPC</li>
<li><input disabled="" type="checkbox"/>
Limit Terminating EC2 Instances to an IP Address Range</li>
<li><input disabled="" type="checkbox"/>
Generate Policy based on CloudTrail Activity</li>
</ul>
<h2 id="future-work"><a class="header" href="#future-work">Future work</a></h2>
<ul>
<li>Add more detailed description for the checklist (The why?)</li>
<li>Add the automation to perform these checks using Infrastructure as Code (IaC) (The How?)</li>
</ul>
<h2 id="references-1"><a class="header" href="#references-1">References</a></h2>
<ul>
<li><a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ec2-security.html">AWS EC2 Security</a></li>
<li><a href="https://asecure.cloud/l/s_ec2/">asecure.cloud</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="rds"><a class="header" href="#rds">RDS</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="iam"><a class="header" href="#iam">IAM</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="lambda"><a class="header" href="#lambda">Lambda</a></h1>
<ol>
<li>Preventive
<ul>
<li>Code Signing</li>
<li>Block public access to S3 bucket</li>
<li>S3 Bucket encryption at rest</li>
<li>Allows only signed container from AWS ECR (for containerized lambda)</li>
<li>Configure Security Groups to allow only required traffic from the VPC</li>
<li>Avoid associating all subnets with VPC endpoint associate only subnets that need access to required endpoint resources </li>
</ul>
</li>
<li>Detctive
<ul>
<li>Enable Cloudtrail</li>
<li>Enable AWS Config</li>
</ul>
</li>
<li>Logging and monitoring
<ul>
<li>Enable Cloudtrail</li>
<li>Enable AWS Xray</li>
</ul>
</li>
<li>Identity and Access Management
<ul>
<li>Triggers
<ul>
<li>API : Authentication - IAM (REST API) JWT (HTTP)</li>
<li>Share only required API endpoint Lamda functions through the API gateway 
: API Key not prefered</li>
<li>Services : IAM</li>
</ul>
</li>
<li>IAM 
<ul>
<li>Grant least privilege policy</li>
<li>Generate Policy based on
CloudTrail Activity</li>
<li>Avoid sharing the same IAM role between Lamda functions (setup a dedicated IAM role per Lamda function)</li>
</ul>
</li>
</ul>
</li>
</ol>
<div style="break-before: page; page-break-before: always;"></div><h1 id="eks"><a class="header" href="#eks">EKS</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="contributors"><a class="header" href="#contributors">Contributors</a></h1>
<ul>
<li><a href="https://twitter.com/0xCardinal">Kumar Ashwin</a></li>
<li></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="how-to-contribute"><a class="header" href="#how-to-contribute">How to Contribute?</a></h1>
<p>Each Checklist contatin a section of Future Work, which mentions the additions/improvements that can be made to the existing work. If one wants to do something new/different, we would love to hear it out. Please get in contact.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        
                        
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                
                            </nav>

        </div>

        
        
        
                <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        
        
                <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        
        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        
                        <script type="text/javascript">
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>
                
    </body>
</html>
